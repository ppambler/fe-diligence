### âœï¸ Tangxt â³ 2022-01-02 ğŸ·ï¸ Node.js 

# 02-æ–‡ä»¶æ¨¡å—

### <mark>1ï¼‰æœ¬è¯¾ç›®æ ‡</mark>

å®Œæˆä¸€ä¸ªåŸºäºã€Œæ–‡ä»¶ã€çš„ todo å·¥å…·

ğŸ’¡ï¼šå®Œæˆåçš„æ•ˆæœæ˜¯æ€æ ·çš„ï¼Ÿ

``` bash
yarn global add node-todo-1
```

ğŸ’¡ï¼šè¿™ä¸ªå·¥å…·æœ‰å“ªäº›åŠŸèƒ½ï¼Œä»¥åŠæˆ‘ä»¬é€šè¿‡ä»€ä¹ˆå‘½ä»¤å¯ä»¥ä½¿ç”¨è¿™äº›åŠŸèƒ½ï¼Ÿ

![éœ€æ±‚](assets/img/2022-01-03-23-11-17.png)

ğŸ’¡ï¼šå¦‚ä½•å­¦ä¹ ï¼Ÿ

![CRM](assets/img/2022-01-03-23-19-19.png)

> CRM -> å»å®˜ç½‘æˆ–ç½‘ä¸ŠæŠ„ä¸€äº›ä»£ç ï¼ŒæŠ„å®Œåè®©è¿™äº›ä»£ç èƒ½å¤ŸæˆåŠŸçš„è¿è¡Œï¼Œä¿®æ”¹è¿™ä¸ªä»£ç ï¼Œåœ¨ä¿®æ”¹çš„è¿‡ç¨‹ä¸­ï¼Œä½ å¤§æ¦‚å°±èƒ½ç†è§£è¿™ä¸ªä»£ç çš„åŸç†æ˜¯å•¥äº† -> ç»§ç»­è¿è¡Œï¼Œç»§ç»­ä¿®æ”¹ -> è¿™ä¸ªåŠŸèƒ½å®Œæˆåï¼Œå†å»æŠ„æ–°çš„ä»£ç 
> 
> ä¿®æ”¹çš„ç›®çš„æ˜¯ä¸ºäº†å®ŒæˆæŸä¸ªåŠŸèƒ½
> 
> æ€»ä¹‹ï¼Œä¸åœåœ° CRM

ğŸ’¡ï¼šå®Œæˆè¿™ä¸ªå·¥å…·éœ€è¦ç”¨åˆ°çš„ä¾èµ–ï¼Ÿ

``` json
{
  "name": "node-todo-2",
  "version": "0.0.3",
  "main": "index.js",
  "license": "MIT",
  "bin": {
    "t": "cli.js"
  },
  "files": [
    "*.js"
  ],
  "scripts":{
    "test": "jest"
  },
  "dependencies": {
    "commander": "^3.0.2",
    "inquirer": "^7.0.0"
  },
  "devDependencies": {
    "jest": "^24.9.0"
  }
}
```

### <mark>2ï¼‰åˆ›å»º Node.js å‘½ä»¤è¡Œé¡¹ç›®</mark>

> æ–‡æ¡£ï¼š[commander.js/Readme_zh-CN.md at master Â· tj/commander.js](https://github.com/tj/commander.js/blob/master/Readme_zh-CN.md)

1. `mkdir node-todo`
2. `cd node-todo`
3. `yarn init -y`
4. ä¿®æ”¹`package.json`çš„ç‰ˆæœ¬ä¸º`0.0.1`
5. æ‰“å¼€`commander.js`æ–‡æ¡£ï¼ˆå®‰è£…åï¼Œé»˜è®¤ä¼šæœ‰ä¸€ä¸ª`-h`é€‰é¡¹ï¼Œç”¨æ¥å±•ç¤ºæœ‰å“ªäº›é€‰é¡¹å’Œå­å‘½ä»¤ï¼‰ï¼Œç”¨ CRM å¤§æ³•æµ‹è¯•ï¼š
   1. å¦‚ä½•ä½¿ç”¨é€‰é¡¹ï¼ˆ`option`ï¼‰ -> å¯ä»¥`-h`ï¼Œä¹Ÿå¯ä»¥`--help`ï¼Œä¹Ÿå¯ä»¥`-help`ï¼ˆæœ€å¥½æ˜¯ç”¨`--`ï¼‰
   2. å¦‚ä½•ä½¿ç”¨å­å‘½ä»¤ï¼ˆ`command`ï¼‰ -> `<>`æ˜¯å¿…å¡«é¡¹ï¼Œ`[]`æ˜¯å¯é€‰é¡¹ -> å­å‘½ä»¤åè¾¹çš„å‚æ•°è·å– -> å¦‚æœä½ å†™äº†`<>`ï¼Œé‚£ä¹ˆå‘½ä»¤åçš„ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯è¯¥å‘½ä»¤èƒ½æ‹¿åˆ°çš„å”¯ä¸€ä¸€ä¸ªå‚æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯`command`å¯¹è±¡ï¼Œå¦‚æœä½ ä¸å†™`<>`ï¼Œé‚£ä¹ˆä½ å¯ä»¥æ‹¿åˆ°å¤šä¸ªè¾“å…¥çš„å‚æ•°

- å¦‚æœåªæœ‰ä¸€ä¸ªå‘½ä»¤ï¼Œå³å†™äº†å¾ˆå¤šä¸ªè‡ªå®šä¹‰`option`
- å¦‚æœæœ‰å¤šä¸ªå‘½ä»¤ï¼Œé‚£ä¹ˆä½ å†™çš„è‡ªå®šä¹‰`option`åªèƒ½ä¸ºæŸä¸ªå‘½ä»¤è€ŒæœåŠ¡

![option](assets/img/2022-01-05-20-07-47.png)

![command](assets/img/2022-01-05-19-58-27.png)

### <mark>3ï¼‰å®ç°åˆ›å»ºåŠŸèƒ½</mark>

> æŸ¥è¯¢ APIï¼š<https://nodejs.org/dist/latest-v14.x/docs/api/fs.html#fs.readFile()>

- å¾ˆç®€é™‹çš„ä»£ç ï¼Œéœ€è¦åœ¨ç½‘ä¸ŠæŠ„ä»£ç ï¼Œæ ¹æ®æŠ„åˆ°çš„ä»£ç ï¼Œç„¶åæ”¹æˆè‡ªå·±æƒ³è¦çš„

![API æŸ¥çœ‹](assets/img/2022-01-05-20-38-36.png)

- `'a+'`: Open file for reading and appending. The file is created if it does not exist.

æ·»åŠ ä»»åŠ¡ï¼š

- `node cli.js add ä»»åŠ¡ 1`

> [Demo](https://github.com/ppambler/fe-diligence-demo/commit/03d20c0)

ğŸ’¡ï¼šdevdocs è¿™ä¸ªç½‘ç«™çš„é…ç½®

![é…ç½®](assets/img/2022-01-04-18-02-23.png)

### <mark>4ï¼‰å°è£…ä¼˜åŒ–ä»£ç </mark>

- é¢å‘æ¥å£ç¼–ç¨‹

![é¢å‘æ¥å£ç¼–ç¨‹](assets/img/2022-01-05-22-14-37.png)

![ä¼˜åŒ–ä»£ç ](assets/img/2022-01-05-22-25-05.png)

> [Demo](https://github.com/ppambler/fe-diligence-demo/commit/2db3d15)

### <mark>5ï¼‰æ¶ˆé™¤ WebStorm çš„è­¦å‘Š</mark>

è­¦å‘Šï¼š

![è­¦å‘Š](assets/img/2022-01-04-17-56-42.png)

æ¶ˆé™¤è­¦å‘Š

![è­¦å‘Š](assets/img/2022-01-04-17-55-22.png)

æœªä½¿ç”¨çš„å˜é‡ä¹Ÿè¦åˆ æ‰ï¼š

![æœªä½¿ç”¨å˜é‡](assets/img/2022-01-04-17-57-58.png)

å‡ºç°é”™è¯¯å°±å¾—é©¬ä¸Šæ”¹æ‰ï¼Œä¸ç„¶ï¼Œé”™è¯¯ç§¯ç´¯å¤šäº†ï¼Œä½ å°±æ— æ³•å‘ç°å“ªé‡Œæ˜¯çœŸæ­£çš„é”™è¯¯äº†ï¼

### <mark>6ï¼‰å®Œæˆæ‰€æœ‰åŠŸèƒ½</mark>

> æ–‡æ¡£ï¼š[SBoudrias/Inquirer.js: A collection of common interactive command line user interfaces.](https://github.com/SBoudrias/Inquirer.js/)

æ¸…ç©ºæ‰€æœ‰ä»»åŠ¡`node cli.js clear`ï¼š

> [Demo](https://github.com/ppambler/fe-diligence-demo/commit/5cb2fc7)

æŸ¥çœ‹æ‰€æœ‰ä»»åŠ¡`node cli.js`ï¼š

> [Demo](https://github.com/ppambler/fe-diligence-demo/commit/3bd4b09)

ç”¨æˆ·æ—¢ç„¶æŸ¥çœ‹äº†æ‰€æœ‰ä»»åŠ¡ï¼Œå°±æƒ³ç€æ“ä½œä¸€ä¸‹è¿™äº›ä»»åŠ¡ï¼š

![æ“ä½œä»»åŠ¡](assets/img/2022-01-05-23-54-27.png)

æ¯ä¸€ä¸ªè¯¢é—®æ“ä½œéƒ½ä¼šå±•ç¤ºæˆä¸€ä¸ªåˆ—è¡¨â€¦â€¦

![æ“ä½œåˆ—è¡¨](assets/img/2022-01-06-00-10-08.png)

é»˜è®¤æ“ä½œï¼š

![é»˜è®¤æ“ä½œ](assets/img/2022-01-06-00-13-53.png)

> [Demo](https://github.com/ppambler/fe-diligence-demo/commit/32bb854)

ğŸ’¡ï¼š`process.argv`

![argv](assets/img/2022-01-04-18-49-55.png)

ğŸ’¡ï¼šåŠ `then`

![then](assets/img/2022-01-04-18-52-22.png)

> `void` æ˜¯ JavaScript ä¸­éå¸¸é‡è¦çš„å…³é”®å­—ï¼Œè¯¥æ“ä½œç¬¦æŒ‡å®šè¦è®¡ç®—ä¸€ä¸ªè¡¨è¾¾å¼ä½†æ˜¯ä¸è¿”å›å€¼ã€‚

å½“å‡½æ•°è¿”å›å€¼æ˜¯ä¸€ä¸ªä¸ä¼šè¢«ä½¿ç”¨åˆ°çš„æ—¶å€™ï¼Œåº”è¯¥ä½¿ç”¨ `void` è¿ç®—ç¬¦ï¼Œæ¥ç¡®ä¿è¿”å› `undefined`ã€‚

â¹ï¼š[JS ä¸­ void çš„æ­£ç¡®ç”¨æ³• Â· ä¸ç«‹ä¸ç ´](https://blog.windrunner.me/fe/void.html)

â¹ï¼š[è°ˆè°ˆ JS ä¸­çš„è¿ç®—ç¬¦ï¼švoid çš„å››å¤§ç”¨æ³• - ç®€ä¹¦](https://www.jianshu.com/p/30a582b6a8cd)

ğŸ’¡ï¼š`value`ç”¨å­—ç¬¦ä¸²

![å­—ç¬¦ä¸²](assets/img/2022-01-04-18-59-09.png)

### <mark>7ï¼‰å†æ¬¡å°è£…ä¼˜åŒ–ä»£ç </mark>

é¢å¯¹å¾ˆé•¿çš„ä»£ç ï¼Ÿ -> ä¸è¦æ”¾åˆ°ä¸€å¨

1. åŠ æ³¨é‡Š
2. ç»™è¿™ä¸ªå‡½æ•°èµ·ä¸€ä¸ªæ°å½“çš„åå­—ï¼Œç„¶åè°ƒç”¨å®ƒ

æ³¨æ„ï¼šä¼˜åŒ–ä¸æ˜¯ä¸€æ¬¡å°±èƒ½åšå¥½çš„

> [Demo](https://github.com/ppambler/fe-diligence-demo/commit/f40b154)

ğŸ’¡ï¼šwebstorm å¯ä»¥è®©æˆ‘ä»¬çœ‹åˆ°ä»£ç çš„ç»“æ„

![ä»£ç ç»“æ„](assets/img/2022-01-04-19-11-18.png)

![VS Code](assets/img/2022-01-06-00-40-20.png)

### <mark>8ï¼‰å¦‚ä½•å‘å¸ƒåˆ° npm</mark>

> [Demo](https://github.com/ppambler/fe-diligence-demo/commit/db60dd2)

ğŸ’¡ï¼š`cli.js` å’Œ `main.js`çš„åŒºåˆ«

![åŒºåˆ«](assets/img/2022-01-04-19-15-45.png)

ğŸ’¡ï¼šshebang

![shebang](assets/img/2022-01-04-19-18-11.png)

ğŸ’¡ï¼šå¯æ‰§è¡Œæ–‡ä»¶

![å¯æ‰§è¡Œæ–‡ä»¶](assets/img/2022-01-04-19-26-41.png)

ğŸ’¡ï¼š`files`å­—æ®µ

![files](assets/img/2022-01-04-19-30-05.png)

ğŸ’¡ï¼š`nrm`

1. `nrm ls`ï¼šæŸ¥çœ‹å½“å‰ç”¨ä»€ä¹ˆæº
2. `nrm use npm`ï¼šä½¿ç”¨ `npm` çš„å®˜æ–¹æº

ğŸ’¡ï¼šä¸Šä¼ åçš„å¤„ç†ç»“æœ

![ä¸Šä¼ ç»“æœ](assets/img/2022-01-04-19-37-59.png)

ğŸ’¡ï¼šæµ‹è¯•

å®‰è£…åˆšåˆšä¸Šä¼ çš„`node-todo-2` -> ä¸è¦ç”¨æ·˜å®æºï¼Œå› ä¸ºæ·˜å®æºæ­¤æ—¶è¿˜æœªæœ‰åŒæ­¥å•Šï¼

![æµ‹è¯•](assets/img/2022-01-04-19-35-37.png)

ğŸ’¡ï¼šä½ å¾ˆè®¨åŒç”¨ç¼©å†™ï¼Œå¯ä½ ä¸ºå•¥ç”¨`pkg`è¿™ä¸ªåå­—ï¼Œè€Œä¸æ˜¯ç”¨`package`å‘¢ï¼Ÿ

å› ä¸º`package`æ˜¯ä¿ç•™å­—å•Š

![ä¿ç•™å­—](assets/img/2022-01-04-19-47-21.png)

ä¸Šä¼ åï¼Œæ›´æ–°ä½ åœ¨æœ¬åœ°å…¨å±€å®‰è£…çš„è¿™ä¸ªåŒ…ï¼š

![æ›´æ–°](assets/img/2022-01-04-19-50-14.png)

å‡çº§ä¸è¡Œï¼Ÿ

é‡æ–°å®‰è£…ï¼š

![å®‰è£…](assets/img/2022-01-04-19-53-06.png)

> å¯ä»¥ç”¨`yarn link`æ¥æµ‹è¯•ï¼Œè¿™æ ·ä½ å°±ä¸ç”¨æ¯æ¬¡æ›´æ–°äº†ç‰ˆæœ¬éƒ½é‡æ–°å‘å¸ƒäº†ï¼ç­‰ä¸€æ¬¡æ€§åœ¨æœ¬åœ°æµ‹è¯•å®Œåï¼Œå†å‘å¸ƒç‰ˆæœ¬

ğŸ’¡ï¼šæ€»ç»“

![æ€»ç»“](assets/img/2022-01-04-19-55-46.png)

![å¸¸è§é”™è¯¯](assets/img/2022-01-04-19-56-24.png)

### <mark>9ï¼‰æµ‹è¯•é¢˜</mark>

![æµ‹è¯•é¢˜](assets/img/2022-01-04-20-03-07.png)
